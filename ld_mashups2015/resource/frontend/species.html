<!DOCTYPE html>
<html>
<head>
<script src="http://openlayers.org/en/master/resources/jquery.min.js"></script>
<script src="lib/jquery.form.min.js"></script>
<script language="JavaScript" type="text/javascript">
	function getQueryParams(qs) {
	    qs = qs.split("+").join(" ");
	
	    var params = {}, tokens,
	        re = /[?&]?([^=]+)=([^&]*)/g;
	
	    while (tokens = re.exec(qs)) {
	        params[decodeURIComponent(tokens[1])]
	            = decodeURIComponent(tokens[2]);
	    }	
	    return params;
	}
	
	function sendAjaxToServer(){
		var params = getQueryParams(document.location.search);
		$.ajax({
		       url: 'http://localhost:9998/api/species?species='+params.species,
		       type: 'GET',
		       dataType: 'application/json',
		       complete: function(data){
		    	   var json = $.parseJSON(data.responseText);
		    	   var species = json['results']['bindings'][0];
		    	   document.getElementById('scientificName').innerHTML="<h1>"+species['scientificName']['value']+"</h1>";
		    	   document.getElementById('abstract').innerHTML=species['abstract']['value'];
		    	   document.getElementById('thumbnail').setAttribute("src",species['thumbnailURL']['value']);
		    	   $.each(species['equivalentWebpages'][0], function(i, item) {
		    		   $("<a href=\""+item['equivalentWebpages']['value']+ "\">"+item['equivalentWebpages']['value']+"</a>")
		    		   	.appendTo("div#links");
		    		   $("<br></br>").appendTo("div#links");
		    	   });
		    	   
		    	   $.each(species['imageUrls'][0], function(i, item) {
		    		   $("<img src=\""+item['imageUrl']['value']+ "\" width=\"300\" height=\"300\">")
		    		   	.appendTo("div#images");
		    	   });
		    	   //for (link in species['equivalentWebpages'][0]){
		    		//   alert(link);
		    		//   $("<a href=\""+link['equivalentWebpages']['value']+ "\">"+link['equivalentWebpages']['value']+"</a>")
		       }
		})
	}
</script>
<meta charset="ISO-8859-1">
<title></title>
</head>
<body onload="sendAjaxToServer()">
<div id="scientificName"></div>
<div id="abstract"></div>
<img src="" id="thumbnail"></img>
<div id="links"></div>
<div id="images"></div>
</body>
</html>